# === BLOCK: SCRIPT_WOHNZIMMER_MASTER_BUTTON ===
# Zweck: Master-Button fÃ¼r Wohnzimmerlichter mit intelligenter Schaltlogik
# Status: ðŸ”„ Neu
# Erstellt: 2025-08-22
# AbhÃ¤ngigkeiten: switch.steckdose_1-5
# Logik: Alle ausâ†’alle an, alle anâ†’alle aus, gemischtâ†’alle aus

wohnzimmer_lichter_master:
  alias: "Wohnzimmer Lichter Master"
  description: "Schaltet alle Wohnzimmerlichter intelligent mit 0.5s VerzÃ¶gerung"
  sequence:
    - choose:
        # CASE 1: Alle Lichter sind AUS â†’ Alle einschalten
        - conditions:
            - condition: template
              value_template: >
                {{ is_state('switch.steckdose_1', 'off') and
                   is_state('switch.steckdose_2', 'off') and
                   is_state('switch.steckdose_3', 'off') and
                   is_state('switch.steckdose_4', 'off') and
                   is_state('switch.steckdose_5', 'off') }}
          sequence:
            - action: switch.turn_on
              entity_id: switch.steckdose_1
            - delay: 0.5
            - action: switch.turn_on
              entity_id: switch.steckdose_2
            - delay: 0.5
            - action: switch.turn_on
              entity_id: switch.steckdose_3
            - delay: 0.5
            - action: switch.turn_on
              entity_id: switch.steckdose_4
            - delay: 0.5
            - action: switch.turn_on
              entity_id: switch.steckdose_5
        
        # CASE 2: Alle Lichter sind AN â†’ Alle ausschalten
        - conditions:
            - condition: template
              value_template: >
                {{ is_state('switch.steckdose_1', 'on') and
                   is_state('switch.steckdose_2', 'on') and
                   is_state('switch.steckdose_3', 'on') and
                   is_state('switch.steckdose_4', 'on') and
                   is_state('switch.steckdose_5', 'on') }}
          sequence:
            - action: switch.turn_off
              entity_id: switch.steckdose_1
            - delay: 0.5
            - action: switch.turn_off
              entity_id: switch.steckdose_2
            - delay: 0.5
            - action: switch.turn_off
              entity_id: switch.steckdose_3
            - delay: 0.5
            - action: switch.turn_off
              entity_id: switch.steckdose_4
            - delay: 0.5
            - action: switch.turn_off
              entity_id: switch.steckdose_5

      # DEFAULT CASE: Gemischte ZustÃ¤nde â†’ Alle ausschalten
      default:
        - action: switch.turn_off
          entity_id: switch.steckdose_1
        - delay: 0.5
        - action: switch.turn_off
          entity_id: switch.steckdose_2
        - delay: 0.5
        - action: switch.turn_off
          entity_id: switch.steckdose_3
        - delay: 0.5
        - action: switch.turn_off
          entity_id: switch.steckdose_4
        - delay: 0.5
        - action: switch.turn_off
          entity_id: switch.steckdose_5

# === END BLOCK: SCRIPT_WOHNZIMMER_MASTER_BUTTON ===